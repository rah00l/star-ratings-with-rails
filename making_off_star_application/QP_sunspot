********************************************************************************

After adding a new key inside model need to restart solr server in order to have indexing ...

rake sunspot:solr:stop

rake sunspot:solr:start

rake sunspot:solr:reindex

********************************************************************************


# Add gem in Gemfile 
gem 'sunspot_rails'
gem 'sunspot_solr'


# Install Gem 
bundle install

# Generator: (will generate sunspot.yml file)
rails g sunspot_rails:install 

If java was not installed use following commands to install -

sudo apt-get install default-jre
sudo apt-get install default-jdk

#Start solr sunspot:
rake sunspot:solr:start


Then go to any model file and add following ..
searchable do 
   text	:name, :content
end

Inside your view add following search box to user enter keywords to search
<%= form_tag articles_path, :method => :get do %>
  <p>
    <%= text_field_tag :search, params[:search] %>
    <%= submit_tag "Search", :name => nil %>
  </p>
<% end %>


# After this modify your index action
def index
  @search = Article.search do
    fulltext params[:search]
    with(:published_at).less_than(Time.zone.now)
    facet(:publish_month)
    with(:publish_month, params[:month]) if params[:month].present?
  end
  @articles = @search.results
end

# Also very time when you are going to add/modify inside index,Need to reindex to view  result by,
 rake sunspot:reindex


# More option for search criteria would be:
searchable do 
   text	:name, :boost => 5
   text :content, :publish_month 
# this following would be for nested resource search can write like this
   text :comments do
	comments.map(&:content)
   end 
  string :publish_month
end

def publish_month
	publish_at.strftime("%B %Y")
end


#At view level need to add following code for Facets
<div id="facets">
  <h3>Published</h3>
  <ul>
    <% for row in @search.facet(:publish_month).rows %>
      <li>
        <% if params[:month].blank? %>
          <%= link_to row.value, :month => row.value %> (<%= row.count %>)
        <% else %>
          <strong><%= row.value %></strong> (<%= link_to "remove", :month => nil %>)
        <% end %>
      </li>
    <% end %>
  </ul>
</div>






 
